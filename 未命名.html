<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!doctype html&gt;</p>
<p class="p1">&lt;html lang="zh-Hans"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1">&lt;meta charset="utf-8" /&gt;</p>
<p class="p1">&lt;meta name="viewport" content="width=device-width,initial-scale=1" /&gt;</p>
<p class="p1">&lt;title&gt;Notion 番茄计时器&lt;/title&gt;</p>
<p class="p1">&lt;meta name="color-scheme" content="light dark"&gt;</p>
<p class="p1">&lt;style&gt;</p>
<p class="p1">:root{</p>
<p class="p1"><span class="Apple-converted-space">  </span>--bg: #0f1221;</p>
<p class="p1"><span class="Apple-converted-space">  </span>--card: #171a2b;</p>
<p class="p1"><span class="Apple-converted-space">  </span>--text: #e9ecff;</p>
<p class="p1"><span class="Apple-converted-space">  </span>--muted:#a5acd7;</p>
<p class="p1"><span class="Apple-converted-space">  </span>--brand:#6c8cff;</p>
<p class="p1"><span class="Apple-converted-space">  </span>--brand-2:#9a7bff;</p>
<p class="p1"><span class="Apple-converted-space">  </span>--accent:#20e3b2;</p>
<p class="p1"><span class="Apple-converted-space">  </span>--danger:#ff6b6b;</p>
<p class="p1"><span class="Apple-converted-space">  </span>--shadow: 0 10px 30px rgba(0,0,0,.35);</p>
<p class="p1">}</p>
<p class="p1">*{box-sizing:border-box}</p>
<p class="p1">html,body{height:100%}</p>
<p class="p1">body{</p>
<p class="p1"><span class="Apple-converted-space">  </span>margin:0; font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI",</p>
<p class="p1"><span class="Apple-converted-space">  </span>Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", Inter, Arial, "Noto Sans CJK SC", "Noto Sans", sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">  </span>background: radial-gradient(1200px 600px at 80% -10%, #2a2d47 0%, #111424 50%, #0c0f1d 100%), var(--bg);</p>
<p class="p1"><span class="Apple-converted-space">  </span>color:var(--text); display:flex; align-items:center; justify-content:center; padding:24px;</p>
<p class="p1">}</p>
<p class="p1">.container{</p>
<p class="p1"><span class="Apple-converted-space">  </span>width:min(960px, 100%); display:grid; gap:18px;</p>
<p class="p1"><span class="Apple-converted-space">  </span>grid-template-columns: 1fr;</p>
<p class="p1">}</p>
<p class="p1">.header{</p>
<p class="p1"><span class="Apple-converted-space">  </span>display:flex; justify-content:space-between; align-items:center;</p>
<p class="p1">}</p>
<p class="p1">.brand{</p>
<p class="p1"><span class="Apple-converted-space">  </span>display:flex; align-items:center; gap:12px;</p>
<p class="p1"><span class="Apple-converted-space">  </span>font-weight:700; letter-spacing:.3px;</p>
<p class="p1">}</p>
<p class="p1">.logo{</p>
<p class="p1"><span class="Apple-converted-space">  </span>width:36px;height:36px;border-radius:12px;</p>
<p class="p1"><span class="Apple-converted-space">  </span>background: conic-gradient(from 210deg, var(--brand), var(--brand-2));</p>
<p class="p1"><span class="Apple-converted-space">  </span>box-shadow: 0 6px 18px rgba(108,140,255,.45), inset 0 0 18px rgba(255,255,255,.08);</p>
<p class="p1">}</p>
<p class="p1">.controls{</p>
<p class="p1"><span class="Apple-converted-space">  </span>display:flex; align-items:center; gap:10px; flex-wrap:wrap;</p>
<p class="p1">}</p>
<p class="p1">.btn{</p>
<p class="p1"><span class="Apple-converted-space">  </span>appearance:none; border:none; cursor:pointer;</p>
<p class="p1"><span class="Apple-converted-space">  </span>padding:10px 14px; border-radius:12px; font-weight:600;</p>
<p class="p1"><span class="Apple-converted-space">  </span>color:var(--text); background:#22253a; box-shadow:var(--shadow);</p>
<p class="p1"><span class="Apple-converted-space">  </span>transition:transform .06s ease, filter .15s ease, background .2s ease;</p>
<p class="p1">}</p>
<p class="p1">.btn:active{ transform: translateY(1px) scale(.99); }</p>
<p class="p1">.btn.primary{ background: linear-gradient(135deg, var(--brand), var(--brand-2)); }</p>
<p class="p1">.btn.ghost{ background:transparent; border:1px solid #303452; }</p>
<p class="p1">.btn.success{ background: linear-gradient(135deg, #15d1a1, #22e6b7); color:#06281e; }</p>
<p class="p1">.btn.danger{ background: linear-gradient(135deg, #ff6b6b, #ff8c69); }</p>
<p class="p1">.badge{ padding:6px 10px; border-radius:999px; background:#21243a; color:#c9cff8; font-size:12px; }</p>
<p class="p1">.grid{</p>
<p class="p1"><span class="Apple-converted-space">  </span>display:grid; gap:18px;</p>
<p class="p1"><span class="Apple-converted-space">  </span>grid-template-columns: 1.2fr .8fr;</p>
<p class="p1">}</p>
<p class="p1">.card{</p>
<p class="p1"><span class="Apple-converted-space">  </span>background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));</p>
<p class="p1"><span class="Apple-converted-space">  </span>border:1px solid rgba(255,255,255,.08);</p>
<p class="p1"><span class="Apple-converted-space">  </span>backdrop-filter: blur(10px);</p>
<p class="p1"><span class="Apple-converted-space">  </span>border-radius:18px; padding:18px; box-shadow: var(--shadow);</p>
<p class="p1">}</p>
<p class="p1">.timer-wrap{ display:grid; place-items:center; padding:10px 0 6px; }</p>
<p class="p1">.timer{</p>
<p class="p1"><span class="Apple-converted-space">  </span>position:relative; width:min(380px, 75vw); aspect-ratio:1/1; display:grid; place-items:center;</p>
<p class="p1">}</p>
<p class="p1">svg{ overflow:visible }</p>
<p class="p1">.time{</p>
<p class="p1"><span class="Apple-converted-space">  </span>position:absolute; display:grid; place-items:center; text-align:center;</p>
<p class="p1">}</p>
<p class="p1">.time .mmss{</p>
<p class="p1"><span class="Apple-converted-space">  </span>font-size: clamp(42px, 7vw, 68px); line-height:1; font-weight:800;</p>
<p class="p1"><span class="Apple-converted-space">  </span>letter-spacing:.5px;</p>
<p class="p1">}</p>
<p class="p1">.time .mode{</p>
<p class="p1"><span class="Apple-converted-space">  </span>margin-top:6px; font-size:14px; color:var(--muted); letter-spacing:.6px;</p>
<p class="p1">}</p>
<p class="p1">.pillbar{</p>
<p class="p1"><span class="Apple-converted-space">  </span>display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin-top:12px;</p>
<p class="p1">}</p>
<p class="p1">.pill{</p>
<p class="p1"><span class="Apple-converted-space">  </span>padding:6px 10px; border-radius:999px; background:#20243b; color:#cbd1fb; font-size:12px;</p>
<p class="p1"><span class="Apple-converted-space">  </span>display:flex; align-items:center; gap:6px; border:1px solid rgba(255,255,255,.08);</p>
<p class="p1">}</p>
<p class="p1">.kbd{ font-family: ui-monospace, SFMono-Regular, Menlo, monospace; background:#0e1122; padding:2px 6px; border-radius:6px; border:1px solid #313554; color:#b9c1ff; }</p>
<p class="p1">.actions{ display:flex; justify-content:center; gap:10px; margin-top:14px; flex-wrap:wrap; }</p>
<p class="p1">.stats{</p>
<p class="p1"><span class="Apple-converted-space">  </span>display:grid; grid-template-columns:1fr 1fr; gap:12px;</p>
<p class="p1">}</p>
<p class="p1">.stat{</p>
<p class="p1"><span class="Apple-converted-space">  </span>background:#14172a; border:1px solid #2b2f52; border-radius:14px; padding:14px;</p>
<p class="p1">}</p>
<p class="p1">.stat b{ font-size:22px }</p>
<p class="p1">.stat small{ color:var(--muted) }</p>
<p class="p2"><br></p>
<p class="p1">.settings .row{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin-bottom:12px }</p>
<p class="p1">.field{</p>
<p class="p1"><span class="Apple-converted-space">  </span>background:#14172a; border:1px solid #2b2f52; border-radius:12px; padding:12px;</p>
<p class="p1"><span class="Apple-converted-space">  </span>display:flex; align-items:center; justify-content:space-between; gap:8px;</p>
<p class="p1">}</p>
<p class="p1">.field label{ color:#cbd1fb; font-size:14px }</p>
<p class="p1">.field input, .field select{</p>
<p class="p1"><span class="Apple-converted-space">  </span>background:#0f1224; color:var(--text);</p>
<p class="p1"><span class="Apple-converted-space">  </span>border:1px solid #2b2f52; border-radius:10px; padding:8px 10px; width:110px;</p>
<p class="p1"><span class="Apple-converted-space">  </span>font-weight:600;</p>
<p class="p1">}</p>
<p class="p1">.switch{</p>
<p class="p1"><span class="Apple-converted-space">  </span>display:inline-flex; align-items:center; gap:8px; cursor:pointer;</p>
<p class="p1">}</p>
<p class="p1">.switch input{ appearance:none; width:42px; height:24px; background:#2b2f52; border-radius:999px; position:relative; outline:none; transition:.2s }</p>
<p class="p1">.switch input:checked{ background: linear-gradient(135deg, var(--brand), var(--brand-2)); }</p>
<p class="p1">.switch input::after{</p>
<p class="p1"><span class="Apple-converted-space">  </span>content:""; position:absolute; width:18px; height:18px; top:3px; left:3px; background:#fff; border-radius:50%;</p>
<p class="p1"><span class="Apple-converted-space">  </span>transition:.2s;</p>
<p class="p1">}</p>
<p class="p1">.switch input:checked::after{ left:21px }</p>
<p class="p1">.links{ font-size:12px; color:var(--muted); margin-top:8px }</p>
<p class="p1">footer{ text-align:center; margin-top:8px; color:#98a0d9; font-size:12px }</p>
<p class="p1">@media (max-width: 940px){</p>
<p class="p1"><span class="Apple-converted-space">  </span>.grid{ grid-template-columns:1fr }</p>
<p class="p1">}</p>
<p class="p1">&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="header"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="brand"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="logo"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div style="font-size:18px"&gt;番茄计时器&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="links"&gt;可嵌入 Notion · 支持深浅色、快捷键与通知&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="controls"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;span class="badge" id="sessionBadge"&gt;今日完成：0&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;button class="btn ghost" id="themeBtn" title="切换主题 (T)"&gt;切换主题&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="grid"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="timer-wrap"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="timer"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;svg width="100%" height="100%" viewBox="0 0 100 100" aria-hidden="true"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;defs&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;stop offset="0%" stop-color="#6c8cff"/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;stop offset="100%" stop-color="#9a7bff"/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/linearGradient&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="0%"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;stop offset="0%" stop-color="#20e3b2"/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;stop offset="100%" stop-color="#8af8d8"/&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/linearGradient&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/defs&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;!-- 背景环 --&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;circle cx="50" cy="50" r="44" stroke="#272b48" stroke-width="8" fill="none" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;!-- 进度环 --&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;circle id="progress" cx="50" cy="50" r="44" stroke="url(#grad)" stroke-width="8" fill="none"</p>
<p class="p1"><span class="Apple-converted-space">                      </span>stroke-linecap="round" transform="rotate(-90 50 50)" stroke-dasharray="276.46" stroke-dashoffset="0"/&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/svg&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="time"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div class="mmss" id="timeText"&gt;25:00&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div class="mode" id="modeText"&gt;工作(番茄)&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="pillbar"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span class="pill"&gt;专注度 &lt;b id="focusPct"&gt;100%&lt;/b&gt;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span class="pill"&gt;本段 &lt;b id="sectionName"&gt;工作&lt;/b&gt;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span class="pill"&gt;循环 &lt;b id="cycleInfo"&gt;0 / 4&lt;/b&gt;&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span class="pill"&gt;&lt;span class="kbd"&gt;Space&lt;/span&gt; 开始/暂停&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span class="pill"&gt;&lt;span class="kbd"&gt;R&lt;/span&gt; 重置&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span class="pill"&gt;&lt;span class="kbd"&gt;S&lt;/span&gt; 下一段&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="actions"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="btn primary" id="startPauseBtn"&gt;开始&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="btn" id="skipBtn"&gt;跳至下一段&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="btn danger" id="resetBtn"&gt;重置&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="btn success" id="notifyBtn"&gt;通知&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button class="btn ghost" id="muteBtn"&gt;🔈 声音开关&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="card settings"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h3 style="margin:6px 0 10px"&gt;设置&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label for="workMin"&gt;工作（分钟）&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input id="workMin" type="number" min="1" max="180" value="25"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label for="shortMin"&gt;短休（分钟）&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input id="shortMin" type="number" min="1" max="60" value="5"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label for="longMin"&gt;长休（分钟）&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input id="longMin" type="number" min="1" max="120" value="15"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="field"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label for="everyN"&gt;每 N 次番茄长休&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input id="everyN" type="number" min="2" max="12" value="4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="field" style="grid-column: span 2;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label class="switch"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;input id="autoNext" type="checkbox" checked&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;span&gt;自动进入下一段&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label class="switch"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;input id="tickSound" type="checkbox"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;span&gt;滴答音&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label class="switch"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;input id="vibrate" type="checkbox"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;span&gt;完成震动(设备支持)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="row"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="stat"&gt;&lt;small&gt;今日完成&lt;/small&gt;&lt;br&gt;&lt;b id="doneToday"&gt;0&lt;/b&gt; 个番茄&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="stat"&gt;&lt;small&gt;累计专注&lt;/small&gt;&lt;br&gt;&lt;b id="totalFocus"&gt;0&lt;/b&gt; 分钟&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="links"&gt;提示：本页会自动保存设置与进度至浏览器（localStorage）。首次播放声音需任意点击一次页面。&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;footer&gt;快捷键：&lt;span class="kbd"&gt;Space&lt;/span&gt; 开始/暂停 · &lt;span class="kbd"&gt;R&lt;/span&gt; 重置 · &lt;span class="kbd"&gt;S&lt;/span&gt; 下一段 · &lt;span class="kbd"&gt;T&lt;/span&gt; 切主题&lt;/footer&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p1">/* --------- 状态 --------- */</p>
<p class="p1">const el = id =&gt; document.getElementById(id);</p>
<p class="p1">const timeText = el('timeText');</p>
<p class="p1">const modeText = el('modeText');</p>
<p class="p1">const progress = el('progress');</p>
<p class="p1">const focusPct = el('focusPct');</p>
<p class="p1">const sectionName = el('sectionName');</p>
<p class="p1">const cycleInfo = el('cycleInfo');</p>
<p class="p1">const startPauseBtn = el('startPauseBtn');</p>
<p class="p1">const skipBtn = el('skipBtn');</p>
<p class="p1">const resetBtn = el('resetBtn');</p>
<p class="p1">const notifyBtn = el('notifyBtn');</p>
<p class="p1">const muteBtn = el('muteBtn');</p>
<p class="p1">const workMinInput = el('workMin');</p>
<p class="p1">const shortMinInput = el('shortMin');</p>
<p class="p1">const longMinInput = el('longMin');</p>
<p class="p1">const everyNInput = el('everyN');</p>
<p class="p1">const autoNextInput = el('autoNext');</p>
<p class="p1">const tickSoundInput = el('tickSound');</p>
<p class="p1">const vibrateInput = el('vibrate');</p>
<p class="p1">const doneTodayEl = el('doneToday');</p>
<p class="p1">const totalFocusEl = el('totalFocus');</p>
<p class="p1">const sessionBadge = el('sessionBadge');</p>
<p class="p1">const themeBtn = el('themeBtn');</p>
<p class="p2"><br></p>
<p class="p1">const CIRC = 2 * Math.PI * 44;</p>
<p class="p1">progress.style.strokeDasharray = CIRC.toFixed(2);</p>
<p class="p2"><br></p>
<p class="p1">const STORAGE_KEY = 'notion-pomo-v2';</p>
<p class="p2"><br></p>
<p class="p1">let state = {</p>
<p class="p1"><span class="Apple-converted-space">  </span>mode: 'work',<span class="Apple-converted-space">                </span>// work | short | long</p>
<p class="p1"><span class="Apple-converted-space">  </span>remaining: 25*60,<span class="Apple-converted-space">            </span>// 秒</p>
<p class="p1"><span class="Apple-converted-space">  </span>running: false,</p>
<p class="p1"><span class="Apple-converted-space">  </span>lastTick: null,</p>
<p class="p1"><span class="Apple-converted-space">  </span>cycles: 0, <span class="Apple-converted-space">                  </span>// 已完成的番茄数（用于长休判断）</p>
<p class="p1"><span class="Apple-converted-space">  </span>doneToday: 0,</p>
<p class="p1"><span class="Apple-converted-space">  </span>totalFocusMin: 0,</p>
<p class="p1"><span class="Apple-converted-space">  </span>muted: false,</p>
<p class="p1"><span class="Apple-converted-space">  </span>settings: {</p>
<p class="p1"><span class="Apple-converted-space">    </span>workMin: 25,</p>
<p class="p1"><span class="Apple-converted-space">    </span>shortMin: 5,</p>
<p class="p1"><span class="Apple-converted-space">    </span>longMin: 15,</p>
<p class="p1"><span class="Apple-converted-space">    </span>everyN: 4,</p>
<p class="p1"><span class="Apple-converted-space">    </span>autoNext: true,</p>
<p class="p1"><span class="Apple-converted-space">    </span>tickSound: false,</p>
<p class="p1"><span class="Apple-converted-space">    </span>vibrate: false,</p>
<p class="p1"><span class="Apple-converted-space">    </span>theme: 'auto', // auto/light/dark</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">/* --------- 存取 --------- */</p>
<p class="p1">function load(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>try{</p>
<p class="p1"><span class="Apple-converted-space">    </span>const raw = localStorage.getItem(STORAGE_KEY);</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(raw){</p>
<p class="p1"><span class="Apple-converted-space">      </span>const saved = JSON.parse(raw);</p>
<p class="p1"><span class="Apple-converted-space">      </span>state = {...state, ...saved, settings:{...state.settings, ...(saved.settings||{})}};</p>
<p class="p1"><span class="Apple-converted-space">    </span>}else{</p>
<p class="p1"><span class="Apple-converted-space">      </span>persist();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}catch(e){}</p>
<p class="p1">}</p>
<p class="p1">function persist(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>localStorage.setItem(STORAGE_KEY, JSON.stringify(state));</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* --------- UI 更新 --------- */</p>
<p class="p1">function fmt(sec){</p>
<p class="p1"><span class="Apple-converted-space">  </span>const m = Math.floor(sec/60).toString().padStart(2,'0');</p>
<p class="p1"><span class="Apple-converted-space">  </span>const s = Math.floor(sec%60).toString().padStart(2,'0');</p>
<p class="p1"><span class="Apple-converted-space">  </span>return `${m}:${s}`;</p>
<p class="p1">}</p>
<p class="p1">function setRemaining(sec){</p>
<p class="p1"><span class="Apple-converted-space">  </span>state.remaining = Math.max(0, sec);</p>
<p class="p1"><span class="Apple-converted-space">  </span>timeText.textContent = fmt(state.remaining);</p>
<p class="p1"><span class="Apple-converted-space">  </span>const total = getCurrentTotal();</p>
<p class="p1"><span class="Apple-converted-space">  </span>const pct = total ? (state.remaining/total) : 0;</p>
<p class="p1"><span class="Apple-converted-space">  </span>progress.style.strokeDashoffset = (CIRC * (1-pct)).toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">  </span>focusPct.textContent = `${Math.round(pct*100)}%`;</p>
<p class="p1">}</p>
<p class="p1">function getCurrentTotal(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>const s = state.settings;</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(state.mode==='work') return s.workMin*60;</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(state.mode==='short') return s.shortMin*60;</p>
<p class="p1"><span class="Apple-converted-space">  </span>return s.longMin*60;</p>
<p class="p1">}</p>
<p class="p1">function updateModeLabel(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>const m = {work:'工作(番茄)', short:'短休', long:'长休'};</p>
<p class="p1"><span class="Apple-converted-space">  </span>sectionName.textContent = state.mode==='work'?'工作':(state.mode==='short'?'短休':'长休');</p>
<p class="p1"><span class="Apple-converted-space">  </span>modeText.textContent = m[state.mode];</p>
<p class="p1"><span class="Apple-converted-space">  </span>cycleInfo.textContent = `${state.cycles % state.settings.everyN} / ${state.settings.everyN}`;</p>
<p class="p1"><span class="Apple-converted-space">  </span>doneTodayEl.textContent = state.doneToday;</p>
<p class="p1"><span class="Apple-converted-space">  </span>totalFocusEl.textContent = state.totalFocusMin;</p>
<p class="p1"><span class="Apple-converted-space">  </span>sessionBadge.textContent = `今日完成：${state.doneToday}`;</p>
<p class="p1">}</p>
<p class="p1">function applySettingsToInputs(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>workMinInput.value = state.settings.workMin;</p>
<p class="p1"><span class="Apple-converted-space">  </span>shortMinInput.value = state.settings.shortMin;</p>
<p class="p1"><span class="Apple-converted-space">  </span>longMinInput.value = state.settings.longMin;</p>
<p class="p1"><span class="Apple-converted-space">  </span>everyNInput.value = state.settings.everyN;</p>
<p class="p1"><span class="Apple-converted-space">  </span>autoNextInput.checked = state.settings.autoNext;</p>
<p class="p1"><span class="Apple-converted-space">  </span>tickSoundInput.checked = state.settings.tickSound;</p>
<p class="p1"><span class="Apple-converted-space">  </span>vibrateInput.checked = state.settings.vibrate;</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* --------- 声音 --------- */</p>
<p class="p1">let chime, tick;</p>
<p class="p1">function initAudio(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>const ctx = new (window.AudioContext || window.webkitAudioContext)();</p>
<p class="p1"><span class="Apple-converted-space">  </span>function tone(freq, dur=0.2, type='sine', vol=0.1){</p>
<p class="p1"><span class="Apple-converted-space">    </span>const o = ctx.createOscillator();</p>
<p class="p1"><span class="Apple-converted-space">    </span>const g = ctx.createGain();</p>
<p class="p1"><span class="Apple-converted-space">    </span>o.type = type; o.frequency.value = freq;</p>
<p class="p1"><span class="Apple-converted-space">    </span>o.connect(g); g.connect(ctx.destination);</p>
<p class="p1"><span class="Apple-converted-space">    </span>g.gain.value = vol;</p>
<p class="p1"><span class="Apple-converted-space">    </span>o.start();</p>
<p class="p1"><span class="Apple-converted-space">    </span>setTimeout(()=&gt;{ o.stop(); }, dur*1000);</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>chime = ()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(state.muted) return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>tone(880, .15, 'sine', .12);</p>
<p class="p1"><span class="Apple-converted-space">    </span>setTimeout(()=&gt;tone(1320, .18, 'sine', .12), 160);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p1"><span class="Apple-converted-space">  </span>tick = ()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(state.muted || !state.settings.tickSound) return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>tone(520, .02, 'square', .03);</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p1"><span class="Apple-converted-space">  </span>// 解锁音频（需要用户交互后才真正可用）</p>
<p class="p1"><span class="Apple-converted-space">  </span>window.addEventListener('pointerdown', ()=&gt;ctx.resume(), {once:true});</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* --------- 通知 --------- */</p>
<p class="p1">function ensureNotify(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(!('Notification' in window)) return;</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(Notification.permission==='default'){</p>
<p class="p1"><span class="Apple-converted-space">    </span>Notification.requestPermission();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1">}</p>
<p class="p1">function notify(title, body){</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(!('Notification' in window)) return;</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(Notification.permission==='granted'){</p>
<p class="p1"><span class="Apple-converted-space">    </span>new Notification(title, { body });</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* --------- 核心計時 --------- */</p>
<p class="p1">let rafId;</p>
<p class="p1">function loop(ts){</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(!state.running){ rafId = requestAnimationFrame(loop); return; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(!state.lastTick) state.lastTick = ts;</p>
<p class="p1"><span class="Apple-converted-space">  </span>const delta = (ts - state.lastTick)/1000;</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(delta &gt;= 1){</p>
<p class="p1"><span class="Apple-converted-space">    </span>state.lastTick = ts;</p>
<p class="p1"><span class="Apple-converted-space">    </span>setRemaining(state.remaining - 1);</p>
<p class="p1"><span class="Apple-converted-space">    </span>tick();</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(state.remaining &lt;= 0){</p>
<p class="p1"><span class="Apple-converted-space">      </span>onFinishSegment();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>persist();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>rafId = requestAnimationFrame(loop);</p>
<p class="p1">}</p>
<p class="p1">function start(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(state.running) return;</p>
<p class="p1"><span class="Apple-converted-space">  </span>state.running = true;</p>
<p class="p1"><span class="Apple-converted-space">  </span>startPauseBtn.textContent = '暂停';</p>
<p class="p1"><span class="Apple-converted-space">  </span>persist();</p>
<p class="p1">}</p>
<p class="p1">function pause(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>state.running = false;</p>
<p class="p1"><span class="Apple-converted-space">  </span>startPauseBtn.textContent = '开始';</p>
<p class="p1"><span class="Apple-converted-space">  </span>state.lastTick = null;</p>
<p class="p1"><span class="Apple-converted-space">  </span>persist();</p>
<p class="p1">}</p>
<p class="p1">function reset(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>const total = getCurrentTotal();</p>
<p class="p1"><span class="Apple-converted-space">  </span>setRemaining(total);</p>
<p class="p1"><span class="Apple-converted-space">  </span>pause();</p>
<p class="p1">}</p>
<p class="p1">function nextSegment(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(state.mode==='work'){</p>
<p class="p1"><span class="Apple-converted-space">    </span>// 完成一个番茄</p>
<p class="p1"><span class="Apple-converted-space">    </span>state.cycles += 1;</p>
<p class="p1"><span class="Apple-converted-space">    </span>state.doneToday += 1;</p>
<p class="p1"><span class="Apple-converted-space">    </span>state.totalFocusMin += state.settings.workMin;</p>
<p class="p1"><span class="Apple-converted-space">    </span>// 判断是否长休</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(state.cycles % state.settings.everyN === 0){</p>
<p class="p1"><span class="Apple-converted-space">      </span>state.mode = 'long';</p>
<p class="p1"><span class="Apple-converted-space">    </span>}else{</p>
<p class="p1"><span class="Apple-converted-space">      </span>state.mode = 'short';</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}else{</p>
<p class="p1"><span class="Apple-converted-space">    </span>// 休息后回到工作</p>
<p class="p1"><span class="Apple-converted-space">    </span>state.mode = 'work';</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>updateModeLabel();</p>
<p class="p1"><span class="Apple-converted-space">  </span>setRemaining(getCurrentTotal());</p>
<p class="p1"><span class="Apple-converted-space">  </span>persist();</p>
<p class="p1">}</p>
<p class="p1">function onFinishSegment(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>chime &amp;&amp; chime();</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(state.settings.vibrate &amp;&amp; navigator.vibrate) navigator.vibrate([100,30,80]);</p>
<p class="p1"><span class="Apple-converted-space">  </span>notify('时间到', state.mode==='work'?'完成一个番茄！休息一下～':'休息结束，继续专注～');</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(state.settings.autoNext){</p>
<p class="p1"><span class="Apple-converted-space">    </span>nextSegment();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}else{</p>
<p class="p1"><span class="Apple-converted-space">    </span>pause();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* --------- 主题 --------- */</p>
<p class="p1">function setTheme(mode){</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(mode==='auto'){</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.documentElement.removeAttribute('data-theme');</p>
<p class="p1"><span class="Apple-converted-space">  </span>}else if(mode==='light'){</p>
<p class="p1"><span class="Apple-converted-space">    </span>// 简单处理：反转配色</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.body.style.background = '#f6f7fb';</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.body.style.color = '#0b0d18';</p>
<p class="p1"><span class="Apple-converted-space">  </span>}else{</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.body.style.background = '';</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.body.style.color = '';</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">/* --------- 事件 --------- */</p>
<p class="p1">startPauseBtn.addEventListener('click', ()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">  </span>state.running ? pause() : start();</p>
<p class="p1">});</p>
<p class="p1">resetBtn.addEventListener('click', reset);</p>
<p class="p1">skipBtn.addEventListener('click', ()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">  </span>onFinishSegment(); // 复用结束逻辑</p>
<p class="p1">});</p>
<p class="p1">notifyBtn.addEventListener('click', ensureNotify);</p>
<p class="p1">muteBtn.addEventListener('click', ()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">  </span>state.muted = !state.muted;</p>
<p class="p1"><span class="Apple-converted-space">  </span>muteBtn.textContent = state.muted ? '🔇 已静音' : '🔈 声音开关';</p>
<p class="p1"><span class="Apple-converted-space">  </span>persist();</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">[workMinInput, shortMinInput, longMinInput, everyNInput].forEach(inp=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">  </span>inp.addEventListener('change', ()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">    </span>const v = parseInt(inp.value||0,10);</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(inp===workMinInput) state.settings.workMin = Math.max(1, v);</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(inp===shortMinInput) state.settings.shortMin = Math.max(1, v);</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(inp===longMinInput) state.settings.longMin = Math.max(1, v);</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(inp===everyNInput) state.settings.everyN = Math.max(2, v);</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(state.mode==='work' &amp;&amp; inp===workMinInput) setRemaining(state.settings.workMin*60);</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(state.mode==='short' &amp;&amp; inp===shortMinInput) setRemaining(state.settings.shortMin*60);</p>
<p class="p1"><span class="Apple-converted-space">    </span>if(state.mode==='long' &amp;&amp; inp===longMinInput) setRemaining(state.settings.longMin*60);</p>
<p class="p1"><span class="Apple-converted-space">    </span>updateModeLabel(); persist();</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1">});</p>
<p class="p1">autoNextInput.addEventListener('change', ()=&gt;{ state.settings.autoNext = autoNextInput.checked; persist(); });</p>
<p class="p1">tickSoundInput.addEventListener('change', ()=&gt;{ state.settings.tickSound = tickSoundInput.checked; persist(); });</p>
<p class="p1">vibrateInput.addEventListener('change', ()=&gt;{ state.settings.vibrate = vibrateInput.checked; persist(); });</p>
<p class="p2"><br></p>
<p class="p1">themeBtn.addEventListener('click', ()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">  </span>// 简化为深/浅切换：通过切换 body class</p>
<p class="p1"><span class="Apple-converted-space">  </span>document.body.classList.toggle('light');</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">document.addEventListener('keydown', (e)=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(e.target &amp;&amp; ['INPUT','TEXTAREA','SELECT'].includes(e.target.tagName)) return;</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(e.code==='Space'){ e.preventDefault(); state.running?pause():start(); }</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(e.key==='r' || e.key==='R'){ reset(); }</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(e.key==='s' || e.key==='S'){ onFinishSegment(); }</p>
<p class="p1"><span class="Apple-converted-space">  </span>if(e.key==='t' || e.key==='T'){ document.body.classList.toggle('light'); }</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">/* --------- 初始化 --------- */</p>
<p class="p1">function boot(){</p>
<p class="p1"><span class="Apple-converted-space">  </span>load();</p>
<p class="p1"><span class="Apple-converted-space">  </span>applySettingsToInputs();</p>
<p class="p1"><span class="Apple-converted-space">  </span>updateModeLabel();</p>
<p class="p1"><span class="Apple-converted-space">  </span>setRemaining(getCurrentTotal());</p>
<p class="p1"><span class="Apple-converted-space">  </span>initAudio();</p>
<p class="p1"><span class="Apple-converted-space">  </span>ensureNotify();</p>
<p class="p1"><span class="Apple-converted-space">  </span>rafId = requestAnimationFrame(loop);</p>
<p class="p1">}</p>
<p class="p1">boot();</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
